<script setup>
import EatDetailModal from '@/components/EatDetailModal.vue'
import EatMethodCard from '@/components/EatMethodCard.vue'
import FruitDetailModal from '@/components/FruitDetailModal.vue'
import HorizontalFruitSlider from '@/components/HorizontalFruitSlider.vue'
import QuizCard from '@/components/QuizCard.vue'
import { reactive, ref } from 'vue'

const tropicalFruits = [
  { id: 'mango', name: 'èŠ’æœ', image: 'mango.png' },
  { id: 'orange', name: 'æ©™å­', image: 'orange.png' },
  { id: 'pineapple', name: 'å‡¤æ¢¨', image: 'pineapple.png' },
  { id: 'mango', name: 'èŠ’æœ', image: 'mango.png' },
  { id: 'orange', name: 'æ©™å­', image: 'orange.png' },
  { id: 'pineapple', name: 'å‡¤æ¢¨', image: 'pineapple.png' },
  { id: 'mango', name: 'èŠ’æœ', image: 'mango.png' },
  { id: 'orange', name: 'æ©™å­', image: 'orange.png' },
  { id: 'pineapple', name: 'å‡¤æ¢¨', image: 'pineapple.png' },
]

const visible = reactive({
  modal: {
    fruitDetail: false,
    eatDetail: false,
  },
})
const selectedFruit = ref(null)

function openDetail() {
  selectedFruit.value = {
    name: 'çŒ•çŒ´æ¡ƒ',
    imageUrl: '/images/fruits/kiwi.png',
    nutrients: {
      ç»´ç”Ÿç´ C: '92.7mg',
      çƒ­é‡: '61kcal/100g',
      çº¤ç»´: '3g',
    },
    storage: 'å¸¸æ¸©é˜´å‡‰å¤„ä¿å­˜3-5å¤©ï¼Œå†·è—å¯å»¶é•¿',
    waysToEat: ['åˆ‡ç‰‡é£Ÿç”¨', 'æ­é…é…¸å¥¶', 'æ‰“æˆæœæ±'],
  }
  visible.modal.fruitDetail = true
}
</script>

<template>
  <ion-page>
    <ion-header>
      <ion-toolbar>
        <ion-title>é¦–é¡µ</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content class="ion-padding">
      <ion-card @click="openDetail">
        <ion-card-header>
          <ion-card-title>çŒ•çŒ´æ¡ƒ</ion-card-title>
          <ion-card-subtitle>ä»Šæ—¥æ°´æœ</ion-card-subtitle>
        </ion-card-header>

        <ion-card-content>
          <ion-img class="w-[200px] mx-auto my-[-40px] mb-[20px]" src="/images/fruits/kiwi.png" alt="The Wisconsin State Capitol building in Madison, WI at night" />
          <span class="text-text-hightLight font-bold">å¯Œå«ç»´ç”Ÿç´ Cï¼Œç”œç¾å¤šæ±</span>
        </ion-card-content>
      </ion-card>

      <EatMethodCard
        title="çŒ•çŒ´æ¡ƒä¼˜æ ¼ç¢—"
        description="é…¸å¥¶æ­é…çŒ•çŒ´æ¡ƒå’Œéº¦ç‰‡ï¼Œæ¸…çˆ½è§£è…»ï¼Œé€‚åˆæ—©é¤é£Ÿç”¨ã€‚"
        image-url="/images/eat-methods/kiwi_yogurt.png"
        :tags="['æ—©é¤', 'ä½è„‚', 'å„¿ç«¥æ¨è']"
        @click="visible.modal.eatDetail = true"
      />

      <HorizontalFruitSlider title="çƒ­å¸¦æ°´æœ" :fruits="tropicalFruits" />
      <div class="mb-4" />
      <HorizontalFruitSlider title="çƒ­å¸¦æ°´æœ" :fruits="tropicalFruits" />

      <ion-card>
        <ion-card-header>
          <ion-card-title>å°çŸ¥è¯†</ion-card-title>
        </ion-card-header>

        <ion-card-content>
          <span>ğŸŒ é¦™è•‰æ”¾åœ¨é€šé£å¤„å¯ä»¥å»¶é•¿ä¿å­˜æ—¶é—´å–”</span>
        </ion-card-content>
      </ion-card>

      <QuizCard
        question="çŒ•çŒ´æ¡ƒå±äºä»¥ä¸‹å“ªä¸€ç±»æ°´æœï¼Ÿ"
        :options="['çƒ­å¸¦æ°´æœ', 'æµ†æœç±»', 'æŸ‘æ©˜ç±»', 'æ ¸æœç±»']"
        :answer-index="1"
      />

      <FruitDetailModal
        v-if="selectedFruit"
        :is-open="visible.modal.fruitDetail"
        :fruit="selectedFruit"
        :on-close="() => visible.modal.fruitDetail = false"
      />

      <EatDetailModal
        :is-open="visible.modal.eatDetail"
        :on-close="() => visible.modal.eatDetail = false"
        :data="{
          title: 'çŒ•çŒ´æ¡ƒä¼˜æ ¼ç¢—',
          description: 'é…¸å¥¶æ­é…çŒ•çŒ´æ¡ƒå’Œéº¦ç‰‡ï¼Œæ¸…çˆ½è§£è…»ï¼Œé€‚åˆæ—©é¤é£Ÿç”¨ã€‚',
          imageUrl: '/images/eat-methods/kiwi_yogurt.png',
          tags: ['æ—©é¤', 'ä½è„‚', 'å„¿ç«¥æ¨è'],
        }"
      />
    </ion-content>
  </ion-page>
</template>
